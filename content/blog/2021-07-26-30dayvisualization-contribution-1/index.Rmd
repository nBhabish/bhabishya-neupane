---
title: '#30DayVisualization Contribution: 1'
author: Bhabishya Neupane
excerpt: "Tokyo Olympic Games 2020 | Olympic Medal Count Standing"
date: '2021-07-26'
slug: []
categories: []
tags:
  - ggplot2
---
```{r img, message=FALSE, warning=FALSE, include=FALSE}
knitr::opts_chunk$set(fig.retina = 2)
```

```{r loading-libraries, message=FALSE, warning=FALSE, include=FALSE}
library(rvest)
library(tidyverse)
library(purrr)
library(ragg)
library(extrafontdb)
library(extrafont)
library(showtextdb)
library(showtext)
```

```{r rvest, message=FALSE, warning=FALSE, include=FALSE}
olympic_url <- "https://olympics.com/tokyo-2020/olympic-games/en/results/all-sports/medal-standings.htm"


olympic_tbl <- read_html(olympic_url) %>% 
    html_table() %>% 
    .[[1]]



olympic_tbl <- olympic_tbl %>% 
    janitor::clean_names() %>% 
    rename(Gold = x, Silver = x_2, Bronze = x_3)
```


```{r data-prep, message=FALSE, warning=FALSE, include=FALSE}
olympic_tbl_top10_total <- olympic_tbl %>% 
    mutate(team_noc = as_factor(team_noc)) %>% 
    mutate(team_noc = team_noc %>% fct_lump(n = 10, w = total, other_level = "Other Countries")) %>% 
    filter(team_noc != "Other Countries")



olympic_tbl_top10_labels <- olympic_tbl_top10_total %>%
    mutate(team_noc = team_noc %>% fct_reorder(total)) %>% 
    mutate(label = str_glue("Rank: {rankby_total}\nGold: {Gold}\nSilver: {Silver}\nBronze: {Bronze}")) 
```

```{r fonts mgmt, message=FALSE, warning=FALSE, include=FALSE}
font_add_google("Lobster", "lobster")
font_add_google("Permanent Marker", "Permanent Marker")
font_add_google("Luckiest Guy", "Luckiest Guy")
showtext_auto()
```

## Plotting

```{r plotting, echo=FALSE, fig.height=20, fig.width=20, message=FALSE, warning=FALSE}
olympic_tbl_top10_labels %>%
    ggplot(aes(total, team_noc)) +
    
    # Geometries
    geom_segment(
        aes(xend = 0, yend = team_noc),
        color = "#28C940",
        #33FF52  #55C1FF
        size = 1.5,
        linetype = 5
    ) +
    geom_point(aes(size = total),
               color = "#FFA120") +
    geom_label(
        aes(label = label),
        vjust = 0.5,
        hjust = 0.5,
        size = 5,
        nudge_x = 0.6,
        color = "#DB8C1D",
        family = "Permanent Marker",
        fill = "#FFF3DC"
    ) +
    
    # Themes
    
    theme(
        plot.background = element_rect(fill = "#5959AB"),
        panel.background = element_rect(fill = "#5959AB"),
        axis.ticks = element_blank(),
        axis.text.x = element_blank(),
        panel.grid = element_blank(),
        axis.text.y = element_text(
            size = 25,
            color = "#FFA120",
            family = "Permanent Marker"
        ),
        plot.caption = element_text(
            size = 14,
            color = "#FFA120",
            family = "Luckiest Guy"
        ),
        legend.position = "none",
        plot.title = element_text(
            size = 50,
            color = "#FFA120",
            hjust = 0.3,
            vjust = 0.5,
            family = "Luckiest Guy",
            margin = margin(20, 10, 5, 0)
        ),
        plot.margin = margin(1, 1, 1, 1, "cm"),
        plot.subtitle = element_text(
            size = 14,
            color = "#FFA120",
            hjust = 0.3,
            family = "Luckiest Guy"
        )
    ) +
    
    labs(
        title = "Tokyo Olympic Games 2020\nStanding by Total Medal Count",
        subtitle = "Brief History: The 2020 Games are the fourth Olympic Games to be held in Japan, following the Tokyo 1964 (Summer),
        Sapporo 1972 (Winter), and Nagano 1998 (Winter) games. Tokyo was to host the 1940 Summer
                  Olympics but pulled out in 1938 due to war.",
        x = "",
        y = "",
        caption = str_glue(
            "Data Source: www.olympics.com\nDate Updated: {Sys.Date()}\nGithub: nBhabish"
        )
    )

```

# My Code Chunk

![plot1](plot1.png) 
# Plotting
![plot2](plot2.png)

